<!DOCTYPE html><html lang="CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="半醒的狐狸，专注技术与产品的学习、实践、研究。"><title>http、http1.0、http1.1、http2.0、https的分析 | 半醒的狐狸</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">http、http1.0、http1.1、http2.0、https的分析</h1><a id="logo" href="/.">半醒的狐狸</a><p class="description">技术、产品、创业、思考、写作</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Start</i></a><a href="/about/"><i class="fa fa-user"> Über</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">http、http1.0、http1.1、http2.0、https的分析</h1><div class="post-meta">Nov 26, 2018</div><div class="post-content"><p>web开发，对http有所了解是很重要的。</p>
<p>这里是我对几个概念的讲解。</p>
<a id="more"></a>
<h1 id="http"><a href="#http" class="headerlink" title="http"></a>http</h1><p>http是一种数据传输的协议，它工作在应用层，基于网络层的tcp协议，中文全称叫“超文本传输协议”，最开始的用途就是为了传输超文本（html）。</p>
<p>http协议是无状态的，也就是前后两次请求，没有必然联系，不会保存上一次请求的相关信息和状态，每一次请求都是独立的，服务器和浏览器都只知道这次请求的信息。也正是因为“无状态”，浏览器和服务器需要通过cookie和session来保存一些状态和标识，比如是否已登录。</p>
<p>http是以一个请求对应一个响应的形式设计的，也就是说，基于http的话，服务器只有接收到请求后才能响应。</p>
<h2 id="http和tcp"><a href="#http和tcp" class="headerlink" title="http和tcp"></a>http和tcp</h2><p>http之所以采用tcp（传输控制协议）在网络层上传输数据，主要因为它可能传输很多数据，而tcp支持按顺序组织数据并保证数据完整性。</p>
<p>也正因为http采用了tcp作为网络层的支持，其本身也就具备了tcp必然的特性，比如握手机制、新建tcp连接的慢启动问题等。</p>
<blockquote>
<p>慢启动：当tcp连接被建立时，它会先进行一次握手，以确保数据能够到达另一方，然后再开始传输数据，刚开始传输数据的时候，不会以最大速率进行传输，而是慢慢加大传输速率，慢启动主要是为了保证数据完整性和tcp所追求的稳定性。</p>
</blockquote>
<h1 id="http1-0"><a href="#http1-0" class="headerlink" title="http1.0"></a>http1.0</h1><p>最先广泛使用的版本。</p>
<p>主要采用短连接的设计，一次请求，就建立一个tcp连接，响应结束，就立刻关闭。</p>
<p>这导致一个网页的资源一旦很复杂，比如需要请求很多数据，就会开启大量的tcp连接，而因此，tcp慢启动的特性严重影响了http的效率，同样因为多个tcp开启需要经历多个三次握手，也是浪费。</p>
<h1 id="http1-1"><a href="#http1-1" class="headerlink" title="http1.1"></a>http1.1</h1><p>目前最流行的版本。</p>
<ul>
<li><p>效率优化（tcp长连接）</p>
<p>它改进了1.0的效率问题，将之前采用tcp短连接的形式优化到了tcp长连接，也就是一个tcp连接，可以处理多次http传输（请求）。我们可以在请求头或者响应头中看到一个connection参数，它等于close的时候，可以使http请求使用tcp短连接，默认情况下它是keep-alive（长连接）。</p>
</li>
<li><p>并发请求</p>
<p>因为改成了长连接，http1.1支持针对统一域名同时发起多个http请求（并发处理），但针对同一域名的并发处理有数量限制，超过数量后会被阻塞，具体的限定数量，由浏览器决定，现代浏览器一般是6个。<br>在http1.1这个机制下，如果想要并发处理超过限制数量的请求，则可以通过使用不同域名的方式来绕过去，因为http1.1的并发请求限制是<strong>针对域名</strong>的。</p>
</li>
<li><p>其他<br>另外，http1.1还增加了一些请求头，比如<strong>host</strong>，用于让服务器确定是哪个虚拟空间（网站）。这让一台服务器能够支持运行多个网站。<br>http1.1还增加了<strong>身份认证、状态管理、cache相关的请求响应头、断点续传</strong>等。</p>
</li>
</ul>
<h1 id="http2-0"><a href="#http2-0" class="headerlink" title="http2.0"></a>http2.0</h1><p>已经有一定普及率的版本</p>
<p>这个版本主要增加了多路复用、二进制分帧、首部压缩、服务器推送等。</p>
<ul>
<li><p>多路复用<br>多路复用对性能提升最为显著， 1.1的时候，多个http请求是通过开启多个tcp连接来实现并发的，但在2.0中，多个http请求的并发，是在一个tcp连接中实现。<br><strong>多路指的是多条通路，复用指重复使用tcp连接，说白了就是一个tcp可以处理多个并发http请求</strong></p>
</li>
<li><p>二进制分帧</p>
<p>1.1时，数据直接以文本传输，是没有顺序的，服务器和浏览器双方都是按接收顺序来组装数据的，这导致一个tcp必须传输一份数据，如果多份数据传输，双方接收的数据就混乱了。<br>2.0因为将数据拆分成了更小的帧和流，也就是二进制分帧，在应用层和网络层中间又加了二进制分帧层，帧是有顺序的，这样传输数据的双方就可以根据流来分类、再按帧的顺序来组装数据</p>
</li>
</ul>
<h1 id="https"><a href="#https" class="headerlink" title="https"></a>https</h1><blockquote>
<p>https实际上不适合放在http1.0、1.1、2.0中间来讨论，因为完全是两回事。</p>
</blockquote>
<p>但在这里，还是总结一下。</p>
<p>https实际上就是http协议和tls（ssl）协议的组合。<br>http负责传输，tls负责加解密（现在一般都用tls，ssl已经很老了）<br>http传输的时候，数据是没有经过加密的，这不安全，所以引入了tls协议来对数据加解密，先处理成密文，再放到下层去工作，http拿到要传输的数据时，这个数据已经经过tls协议的加密，所以http本身也不知道这个数据原本是什么样子。而http从下层拿到数据时，也不知道这个数据是什么内容，需要传给上面的tls层来解密，才能显示出来。<br>这就是https大致的意思。<br>从速度上，https因为多了加解密的步骤，且比http多几次握手（用于双方确定加密方式和证书），所以会慢一些。<br>另外，https采用非对称加密技术。</p>
</div><div class="tags"></div><div class="post-nav"><a class="pre" href="/2018/11/27/编程范式及编程思想/">编程范式及编程思想</a><a class="next" href="/2018/11/22/web大致工作流程/">web大致工作流程</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank"><input type="search" name="word" maxlength="20" placeholder="Search"/><input type="hidden" name="si" value="http://www.vsonweb.com"/><input name="tn" type="hidden" value="bds"/><input name="cl" type="hidden" value="3"/><input name="ct" type="hidden" value="2097152"/><input name="s" type="hidden" value="on"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Kategorien</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Letzte</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/11/29/高内聚低耦合、依赖倒置、控制反转、依赖注入/">高内聚低耦合、依赖倒置、控制反转、依赖注入</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/28/异步-同步、非阻塞-阻塞、并行-并发/">异步/同步、非阻塞/阻塞、并行/并发</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/28/单线程、多线程/">单线程、多线程、多进程</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/27/编程范式及编程思想/">编程范式及编程思想</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/26/http、http1-0、http1-1、http2-0、https的分析/">http、http1.0、http1.1、http2.0、https的分析</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/22/web大致工作流程/">web大致工作流程</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/22/b-s、c-s的分析/">b/s、c/s的分析</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/21/动态类型语言、静态类型语言的分析/">动态类型语言、静态类型语言的分析</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/21/弱类型语言、强类型语言的定义/">弱类型语言、强类型语言的分析</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/20/编译型语言和解释型语言的区别/">编译型语言、解释型语言的分析</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Blogroll</i></div><ul></ul><a href="https://www.jianshu.com/u/e3d9db288dab" title="我的简书" target="_blank">我的简书</a><ul></ul><a href="https://github.com/Ablegang" title="我的Github" target="_blank">我的Github</a><ul></ul><a href="https://www.weifengchuxing.com" title="我的项目" target="_blank">我的项目</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">半醒的狐狸.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>